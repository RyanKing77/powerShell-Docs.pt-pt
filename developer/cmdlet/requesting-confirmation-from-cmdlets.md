---
title: A pedir a confirmação de Cmdlets | Documentos da Microsoft
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- ConfirmImpact [PowerShell Programmer's Guide], described
- ShouldContinue [PowerShell Programmer's Guide], described
- user feedback [PowerShell Programmer's Guide], requesting
- ShouldProcess [PowerShell Programmer's Guide], described
- ConfirmPreference [PowerShell Programmer's Guide], described
ms.assetid: 37d6e87f-57b7-40bd-b645-392cf0b6e88e
caps.latest.revision: 13
ms.openlocfilehash: ec441831f5e3231a44c9875d1b6d2bf6280a6965
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 02/03/2019
ms.locfileid: "56844990"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="12a9c-102">Requesting Confirmation from Cmdlets (Pedir Confirmação a Partir de Cmdlets)</span><span class="sxs-lookup"><span data-stu-id="12a9c-102">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="12a9c-103">Cmdlets deve pedir confirmação quando estiverem prestes a fazer uma alteração no sistema que está fora do ambiente do Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="12a9c-103">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="12a9c-104">Por exemplo, se um cmdlet está prestes a adicionar uma conta de utilizador ou parar um processo, o cmdlet deve pedir confirmação do usuário antes que ele prossiga.</span><span class="sxs-lookup"><span data-stu-id="12a9c-104">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="12a9c-105">Por outro lado, se um cmdlet está prestes a alterar uma variável do Windows PowerShell, o cmdlet não é necessário pedir confirmação.</span><span class="sxs-lookup"><span data-stu-id="12a9c-105">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="12a9c-106">Para fazer um pedido de confirmação, o cmdlet tem de indicar que ele oferece suporte a pedidos de confirmação, e ela deve chamar o [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) e [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) métodos (opcionais) para exibir uma mensagem de pedido de confirmação.</span><span class="sxs-lookup"><span data-stu-id="12a9c-106">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="12a9c-107">Pedidos de confirmação de suporte</span><span class="sxs-lookup"><span data-stu-id="12a9c-107">Supporting Confirmation Requests</span></span>

<span data-ttu-id="12a9c-108">Para suportar pedidos de confirmação, o cmdlet tem de definir o `SupportsShouldProcess` parâmetro do atributo Cmdlet para `true`.</span><span class="sxs-lookup"><span data-stu-id="12a9c-108">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="12a9c-109">Isto permite que o `Confirm` e `WhatIf` parâmetros de cmdlet que são fornecidos pelo Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="12a9c-109">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="12a9c-110">O `Confirm` parâmetro permite que o utilizador controle se o pedido de confirmação é apresentado.</span><span class="sxs-lookup"><span data-stu-id="12a9c-110">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="12a9c-111">O `WhatIf` parâmetro permite que o utilizador determinar se o cmdlet deve exibir uma mensagem ou executar sua ação.</span><span class="sxs-lookup"><span data-stu-id="12a9c-111">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="12a9c-112">Não adicione manualmente os `Confirm` e `WhatIf` parâmetros para um cmdlet.</span><span class="sxs-lookup"><span data-stu-id="12a9c-112">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="12a9c-113">O exemplo seguinte mostra uma declaração de atributo do Cmdlet que suporta pedidos de confirmação.</span><span class="sxs-lookup"><span data-stu-id="12a9c-113">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="12a9c-114">Chamar os métodos de pedido de confirmação</span><span class="sxs-lookup"><span data-stu-id="12a9c-114">Calling the Confirmation request methods</span></span>

<span data-ttu-id="12a9c-115">No código de cmdlet, chamar o [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) método antes da operação que altera o sistema é executada.</span><span class="sxs-lookup"><span data-stu-id="12a9c-115">In the cmdlet code, call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="12a9c-116">O cmdlet de design, de modo que, se a chamada retorna um valor de `false`, não é possível efetuar a operação e o cmdlet processa a operação seguinte.</span><span class="sxs-lookup"><span data-stu-id="12a9c-116">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="12a9c-117">Chamando o método de ShouldContinue</span><span class="sxs-lookup"><span data-stu-id="12a9c-117">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="12a9c-118">A maioria dos cmdlets pedir a confirmação usando apenas o [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) método.</span><span class="sxs-lookup"><span data-stu-id="12a9c-118">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="12a9c-119">No entanto, alguns casos poderão requerer confirmação adicional.</span><span class="sxs-lookup"><span data-stu-id="12a9c-119">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="12a9c-120">Nesses casos, complementar o [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) chamar com uma chamada para o [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) método.</span><span class="sxs-lookup"><span data-stu-id="12a9c-120">For these cases, supplement the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="12a9c-121">Isso permite que o cmdlet ou o fornecedor mais lhe controlar o âmbito do **Sim para todos** resposta ao pedido de confirmação.</span><span class="sxs-lookup"><span data-stu-id="12a9c-121">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="12a9c-122">Se um cmdlet chama o [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) método, o cmdlet também tem de fornecer um `Force` mudar o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="12a9c-122">If a cmdlet calls the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="12a9c-123">Se o utilizador Especifica `Force` quando o usuário invoca o cmdlet, o cmdlet ainda deve chamar [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), mas ele deve ignorar a chamada para [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="12a9c-123">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="12a9c-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) lançará uma exceção quando é chamado de um ambiente de não-interativa em que o utilizador não pode ser pedido.</span><span class="sxs-lookup"><span data-stu-id="12a9c-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="12a9c-125">Adicionar um `Force` parâmetro garante que o comando ainda pode ser executado quando é invocado num ambiente de não-interativa.</span><span class="sxs-lookup"><span data-stu-id="12a9c-125">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="12a9c-126">O exemplo seguinte mostra como chamar [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) e [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="12a9c-126">The following example shows how to call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="12a9c-127">O comportamento de um [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) chamada pode variar dependendo do ambiente em que o cmdlet é invocado.</span><span class="sxs-lookup"><span data-stu-id="12a9c-127">The behavior of a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="12a9c-128">Utilizando as diretrizes anteriores ajudará a garantir que o cmdlet se comporta de forma consistente com outros cmdlets, independentemente do ambiente de host.</span><span class="sxs-lookup"><span data-stu-id="12a9c-128">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="12a9c-129">Para obter um exemplo de chamar o [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) método, consulte [como pedir confirmações](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="12a9c-129">For an example of calling the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="12a9c-130">Especifique o nível de impacto</span><span class="sxs-lookup"><span data-stu-id="12a9c-130">Specify the Impact Level</span></span>

<span data-ttu-id="12a9c-131">Quando cria o cmdlet, especifique o nível de impacto (a gravidade) da alteração.</span><span class="sxs-lookup"><span data-stu-id="12a9c-131">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="12a9c-132">Para tal, defina o valor da `ConfirmImpact` parâmetro do atributo Cmdlet para alta, média ou baixa.</span><span class="sxs-lookup"><span data-stu-id="12a9c-132">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="12a9c-133">Pode especificar um valor para `ConfirmImpact` apenas se também especificar o `SupportsShouldProcess` parâmetro para o cmdlet.</span><span class="sxs-lookup"><span data-stu-id="12a9c-133">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="12a9c-134">Para a maioria dos cmdlets, não é necessário especificar explicitamente `ConfirmImpact`.</span><span class="sxs-lookup"><span data-stu-id="12a9c-134">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="12a9c-135">Em alternativa, utilize a predefinição do parâmetro, que é médio.</span><span class="sxs-lookup"><span data-stu-id="12a9c-135">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="12a9c-136">Se definir `ConfirmImpact` para alta, a operação será confirmada por predefinição.</span><span class="sxs-lookup"><span data-stu-id="12a9c-136">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="12a9c-137">Reserve esta definição para ações altamente problemáticos, como reformatar um volume de disco rígido.</span><span class="sxs-lookup"><span data-stu-id="12a9c-137">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="12a9c-138">Chamando métodos de não confirmação</span><span class="sxs-lookup"><span data-stu-id="12a9c-138">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="12a9c-139">Se o cmdlet ou o fornecedor deve enviar uma mensagem, mas não solicitar confirmação, pode chamar os três métodos seguintes.</span><span class="sxs-lookup"><span data-stu-id="12a9c-139">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="12a9c-140">Evite utilizar o [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) método para enviar mensagens de um desses tipos porque [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) saída é interligada com a saída normal do seu cmdlet ou o fornecedor, que dificulta a escrita de script.</span><span class="sxs-lookup"><span data-stu-id="12a9c-140">Avoid using the [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="12a9c-141">Caution o usuário e continuar com a operação, o cmdlet ou o fornecedor pode chamar o [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) método.</span><span class="sxs-lookup"><span data-stu-id="12a9c-141">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="12a9c-142">Para fornecer informações adicionais que o utilizador pode obter utilizando o `Verbose` parâmetro, o cmdlet ou o fornecedor pode chamar o [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) método.</span><span class="sxs-lookup"><span data-stu-id="12a9c-142">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="12a9c-143">Para fornecer detalhes no nível de depuração para outros desenvolvedores ou para o suporte do produto, o cmdlet ou o fornecedor pode chamar o [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) método.</span><span class="sxs-lookup"><span data-stu-id="12a9c-143">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="12a9c-144">O utilizador pode obter esta informação utilizando o `Debug` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="12a9c-144">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="12a9c-145">Cmdlets e provedores primeiro de chamar os métodos seguintes para pedir confirmação antes de tentar efetuar uma operação que altera um sistema fora do Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="12a9c-145">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="12a9c-146">System.Management.Automation.Cmdlet.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="12a9c-146">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="12a9c-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="12a9c-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="12a9c-148">Eles fazem-lo ao chamar o [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) método, que pede ao utilizador para confirmar a operação com base em como o utilizador invocar o comando.</span><span class="sxs-lookup"><span data-stu-id="12a9c-148">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="12a9c-149">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="12a9c-149">See Also</span></span>

[<span data-ttu-id="12a9c-150">Escrever um Cmdlet do Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="12a9c-150">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
