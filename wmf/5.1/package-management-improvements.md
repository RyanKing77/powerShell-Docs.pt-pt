---
ms.date: 2017-06-12
author: JKeithB
ms.topic: reference
keywords: "WMF, o powershell, o programa de configuração"
contributor: jianyunt, quoctruong
title: "Melhorias na gestão de pacotes no WMF 5.1"
ms.openlocfilehash: b55a1742530b7cd48d60d79b7d4866ebee80a3b6
ms.sourcegitcommit: 75f70c7df01eea5e7a2c16f9a3ab1dd437a1f8fd
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 06/12/2017
---
# <a name="improvements-to-package-management-in-wmf-51"></a><span data-ttu-id="555b3-103">Melhorias na gestão de pacotes no WMF 5.1#</span><span class="sxs-lookup"><span data-stu-id="555b3-103">Improvements to Package Management in WMF 5.1#</span></span>

## <a name="improvements-in-packagemanagement"></a><span data-ttu-id="555b3-104">Melhoramentos na PackageManagement</span><span class="sxs-lookup"><span data-stu-id="555b3-104">Improvements in PackageManagement</span></span> ##
<span data-ttu-id="555b3-105">Seguem-se as correções efetuadas 5.1 o WMF:</span><span class="sxs-lookup"><span data-stu-id="555b3-105">The following are the fixes made in the WMF 5.1:</span></span> 

### <a name="version-alias"></a><span data-ttu-id="555b3-106">Alias de versão</span><span class="sxs-lookup"><span data-stu-id="555b3-106">Version Alias</span></span>

<span data-ttu-id="555b3-107">**Cenário**: Se tiver a versão 1.0 e 2.0 de um pacote, P1, instalados no seu sistema e pretender desinstalar a versão 1.0, executaria `Uninstall-Package -Name P1 -Version 1.0` e esperam versão 1.0 ser desinstaladas depois de executar o cmdlet.</span><span class="sxs-lookup"><span data-stu-id="555b3-107">**Scenario**: If you have version 1.0 and 2.0 of a package, P1, installed on your system, and you want to uninstall version 1.0, you would run `Uninstall-Package -Name P1 -Version 1.0` and expect version 1.0 to be uninstalled after running the cmdlet.</span></span> <span data-ttu-id="555b3-108">No entanto o resultado é que a versão 2.0 obtém desinstalada.</span><span class="sxs-lookup"><span data-stu-id="555b3-108">However the result is that version 2.0 gets uninstalled.</span></span>  
    
<span data-ttu-id="555b3-109">Isto ocorre porque o `-Version` parâmetro é um alias do `-MinimumVersion` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="555b3-109">This occurs because the `-Version` parameter is an alias of the `-MinimumVersion` parameter.</span></span> <span data-ttu-id="555b3-110">Quando PackageManagement está à procura de um pacote com a versão mínima do 1.0 qualificado, devolve a versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="555b3-110">When PackageManagement is looking for a qualified package with the minimum version of 1.0, it returns the latest version.</span></span> <span data-ttu-id="555b3-111">Este comportamento é esperado em casos normais porque localizar que a versão mais recente é normalmente o resultado pretendido.</span><span class="sxs-lookup"><span data-stu-id="555b3-111">This behavior is expected in normal cases because finding the latest version is usually the desired result.</span></span> <span data-ttu-id="555b3-112">No entanto, não deve aplicar ao `Uninstall-Package` maiúsculas e minúsculas.</span><span class="sxs-lookup"><span data-stu-id="555b3-112">However, it should not apply to the `Uninstall-Package` case.</span></span>
    
<span data-ttu-id="555b3-113">**Solução**: remover `-Version` alias inteiramente no PackageManagement (a.k.a.</span><span class="sxs-lookup"><span data-stu-id="555b3-113">**Solution**:removed `-Version` alias entirely in PackageManagement (a.k.a.</span></span> <span data-ttu-id="555b3-114">OneGet) e PowerShellGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-114">OneGet) and PowerShellGet.</span></span> 

### <a name="multiple-prompts-for-bootstrapping-the-nuget-provider"></a><span data-ttu-id="555b3-115">Vários pedidos para bootstrapping o fornecedor do NuGet</span><span class="sxs-lookup"><span data-stu-id="555b3-115">Multiple prompts for bootstrapping the NuGet provider</span></span>

<span data-ttu-id="555b3-116">**Cenário**: ao executar `Find-Module` ou `Install-Module` ou outros cmdlets PackageManagement no seu computador pela primeira vez, PackageManagement tenta arranque o fornecedor do NuGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-116">**Scenario**: When you run `Find-Module` or `Install-Module` or other PackageManagement cmdlets on your computer for the first time, PackageManagement tries to bootstrap the NuGet provider.</span></span> <span data-ttu-id="555b3-117">Fazê-lo porque o fornecedor de PowerShellGet também utiliza o fornecedor do NuGet para transferir os módulos do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="555b3-117">It does this because the PowerShellGet provider also uses the NuGet provider to download PowerShell modules.</span></span> <span data-ttu-id="555b3-118">PackageManagement, em seguida, pede ao utilizador permissão instalar o fornecedor do NuGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-118">PackageManagement then prompts the user for permission to install the NuGet provider.</span></span> <span data-ttu-id="555b3-119">Depois do utilizador seleciona "Sim" para o bootstrapping, será instalada a versão mais recente do fornecedor do NuGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-119">After the user selects "yes" for the bootstrapping, the latest version of the NuGet provider will be installed.</span></span> 
    
<span data-ttu-id="555b3-120">No entanto, em alguns casos, quando tem uma versão antiga do fornecedor de NuGet instalada no seu computador, a versão mais antiga do NuGet, por vezes, obtém carregar o primeiro na sessão do PowerShell (que é a condição provável de antecipação no PackageManagement).</span><span class="sxs-lookup"><span data-stu-id="555b3-120">However, in some cases, when you have an old version of NuGet provider installed on your computer, the older version of NuGet sometimes gets loaded first into the PowerShell session (that's the race condition in PackageManagement).</span></span> <span data-ttu-id="555b3-121">No entanto PowerShellGet requer a versão posterior do fornecedor do NuGet para funcionar, por isso PowerShellGet pede PackageManagement arranque novamente o fornecedor do NuGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-121">However PowerShellGet requires the later version of the NuGet provider to work, so PowerShellGet asks PackageManagement to bootstrap the NuGet provider again.</span></span> <span data-ttu-id="555b3-122">Isto resulta em vários pedidos para bootstrapping o fornecedor do NuGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-122">This results in multiple prompts for bootstrapping the NuGet provider.</span></span>

<span data-ttu-id="555b3-123">**Solução**: no WMF5.1, PackageManagement carrega a versão mais recente do fornecedor do NuGet para evitar várias pede bootstrapping o fornecedor do NuGet.</span><span class="sxs-lookup"><span data-stu-id="555b3-123">**Solution**: In WMF5.1, PackageManagement loads the latest version of the NuGet provider to avoid multiple prompts for bootstrapping the NuGet provider.</span></span>

<span data-ttu-id="555b3-124">Foi também contornar este problema, eliminando manualmente a antiga versão do fornecedor do NuGet (NuGet-Anycpu.exe) se existe entre a $env: ProgramFiles\PackageManagement\ProviderAssemblies $env: LOCALAPPDATA\PackageManagement\ProviderAssemblies</span><span class="sxs-lookup"><span data-stu-id="555b3-124">You could also work around this issue by manually deleting the old version of the NuGet provider (NuGet-Anycpu.exe) if exists from $env:ProgramFiles\PackageManagement\ProviderAssemblies $env:LOCALAPPDATA\PackageManagement\ProviderAssemblies</span></span>


### <a name="support-for-packagemanagement-on-computers-with-intranet-access-only"></a><span data-ttu-id="555b3-125">Suporte para PackageManagement em computadores com o acesso apenas à Intranet</span><span class="sxs-lookup"><span data-stu-id="555b3-125">Support for PackageManagement on computers with Intranet access only</span></span>

<span data-ttu-id="555b3-126">**Cenário**: para o cenário da empresa, as pessoas estão a funcionar num ambiente onde exista sem acesso à Internet, Intranet, mas apenas.</span><span class="sxs-lookup"><span data-stu-id="555b3-126">**Scenario**: For the enterprise scenario, people are working under an environment where there is no Internet access but Intranet only.</span></span> <span data-ttu-id="555b3-127">PackageManagement não suportava neste caso, WMF 5.0.</span><span class="sxs-lookup"><span data-stu-id="555b3-127">PackageManagement did not support this case in WMF 5.0.</span></span>

<span data-ttu-id="555b3-128">**Cenário**: WMF 5.0, PackageManagement não suporta computadores que têm apenas Intranet (mas não Internet) acesso.</span><span class="sxs-lookup"><span data-stu-id="555b3-128">**Scenario**: In WMF 5.0, PackageManagement did not support computers that have only Intranet (but not Internet) access.</span></span>

<span data-ttu-id="555b3-129">**Solução**: no WMF 5.1, pode seguir estes passos para permitir que os computadores de Intranet utilizar PackageManagement:</span><span class="sxs-lookup"><span data-stu-id="555b3-129">**Solution**: In WMF 5.1, you can follow these steps to allow Intranet computers to use PackageManagement:</span></span>

1. <span data-ttu-id="555b3-130">Transferir o fornecedor do NuGet através de outro computador que tenha uma ligação à Internet utilizando `Install-PackageProvider -Name NuGet`.</span><span class="sxs-lookup"><span data-stu-id="555b3-130">Download the NuGet provider using another computer that has an Internet connection by using `Install-PackageProvider -Name NuGet`.</span></span>

2. <span data-ttu-id="555b3-131">Localize o fornecedor do NuGet sob um `$env:ProgramFiles\PackageManagement\ProviderAssemblies\nuget` ou `$env:LOCALAPPDATA\PackageManagement\ProviderAssemblies\nuget`.</span><span class="sxs-lookup"><span data-stu-id="555b3-131">Find the NuGet provider under either `$env:ProgramFiles\PackageManagement\ProviderAssemblies\nuget`  or  `$env:LOCALAPPDATA\PackageManagement\ProviderAssemblies\nuget`.</span></span>

3. <span data-ttu-id="555b3-132">Copiar os binários para uma localização de partilha de rede ou de pasta que o computador de Intranet pode aceder e, em seguida, instale o fornecedor de NuGet com `Install-PackageProvider -Name NuGet -Source <Path to folder>`.</span><span class="sxs-lookup"><span data-stu-id="555b3-132">Copy the binaries to a folder or network share location that the Intranet computer can access, and then install the NuGet provider with `Install-PackageProvider -Name NuGet -Source <Path to folder>`.</span></span>


### <a name="event-logging-improvements"></a><span data-ttu-id="555b3-133">Melhoramentos do registo de eventos</span><span class="sxs-lookup"><span data-stu-id="555b3-133">Event logging improvements</span></span>

<span data-ttu-id="555b3-134">Quando instalar pacotes, está a alterar o estado do computador.</span><span class="sxs-lookup"><span data-stu-id="555b3-134">When you install packages, you are changing the state of the computer.</span></span> <span data-ttu-id="555b3-135">No WMF 5.1, PackageManagement agora os registos de eventos no registo de eventos do Windows para `Install-Package`, `Uninstall-Package`, e `Save-Package` atividades.</span><span class="sxs-lookup"><span data-stu-id="555b3-135">In WMF 5.1, PackageManagement now logs events to the Windows event log for `Install-Package`, `Uninstall-Package`, and `Save-Package` activities.</span></span> <span data-ttu-id="555b3-136">O registo de eventos é igual PowerShell, ou seja, `Microsoft-Windows-PowerShell, Operational`.</span><span class="sxs-lookup"><span data-stu-id="555b3-136">The Event log  is the same as for PowerShell, that is, `Microsoft-Windows-PowerShell, Operational`.</span></span>

### <a name="support-for-basic-authentication"></a><span data-ttu-id="555b3-137">Suporte para a autenticação básica</span><span class="sxs-lookup"><span data-stu-id="555b3-137">Support for basic authentication</span></span>

<span data-ttu-id="555b3-138">Em WMF 5.1, PackageManagement suporta localizar e instalar pacotes de um repositório de que requer autenticação básica.</span><span class="sxs-lookup"><span data-stu-id="555b3-138">In WMF 5.1, PackageManagement supports finding and installing packages from a repository that requires basic authentication.</span></span> <span data-ttu-id="555b3-139">Pode fornecer as suas credenciais para o `Find-Package` e `Install-Package` cmdlets.</span><span class="sxs-lookup"><span data-stu-id="555b3-139">You can supply your credentials to the `Find-Package` and `Install-Package` cmdlets.</span></span> <span data-ttu-id="555b3-140">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="555b3-140">For example:</span></span>

``` PowerShell
Find-Package -Source <SourceWithCredential> -Credential (Get-Credential)
```
### <a name="support-for-using-packagemanagement-behind-a-proxy"></a><span data-ttu-id="555b3-141">Suporte para utilização PackageManagement atrás de um proxy</span><span class="sxs-lookup"><span data-stu-id="555b3-141">Support for using PackageManagement behind a proxy</span></span>

<span data-ttu-id="555b3-142">No WMF 5.1, PackageManagement demora agora novos parâmetros de proxy `-ProxyCredential` e `-Proxy`.</span><span class="sxs-lookup"><span data-stu-id="555b3-142">In WMF 5.1, PackageManagement now takes new proxy parameters `-ProxyCredential` and `-Proxy`.</span></span> <span data-ttu-id="555b3-143">Utilizar estes parâmetros, pode especificar o URL de proxy e as credenciais para PackageManagement cmdlets.</span><span class="sxs-lookup"><span data-stu-id="555b3-143">Using these parameters, you can specify the proxy URL and credentials to PackageManagement cmdlets.</span></span> <span data-ttu-id="555b3-144">Por predefinição, são utilizadas as definições de proxy do sistema.</span><span class="sxs-lookup"><span data-stu-id="555b3-144">By default, system proxy settings are used.</span></span> <span data-ttu-id="555b3-145">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="555b3-145">For example:</span></span>

``` PowerShell
Find-Package -Source http://www.nuget.org/api/v2/ -Proxy http://www.myproxyserver.com -ProxyCredential (Get-Credential)
```

