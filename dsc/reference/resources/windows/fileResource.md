---
ms.date: 06/12/2017
keywords: DSC, powershell, configuração, a configuração
title: Recurso do ficheiro de DSC
ms.openlocfilehash: b5bc2c305b8cfccbd044274811df631264a24279
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 04/23/2019
ms.locfileid: "62077335"
---
# <a name="dsc-file-resource"></a><span data-ttu-id="95561-103">Recurso do ficheiro de DSC</span><span class="sxs-lookup"><span data-stu-id="95561-103">DSC File Resource</span></span>

> <span data-ttu-id="95561-104">Aplica-se a: Windows PowerShell 4.0, Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="95561-104">Applies To: Windows PowerShell 4.0, Windows PowerShell 5.0</span></span>

<span data-ttu-id="95561-105">O recurso de arquivo no Windows PowerShell Desired State Configuration (DSC) fornece um mecanismo para gerir ficheiros e pastas no nó de destino.</span><span class="sxs-lookup"><span data-stu-id="95561-105">The File resource in Windows PowerShell Desired State Configuration (DSC) provides a mechanism to manage files and folders on the target node.</span></span> <span data-ttu-id="95561-106">O **DestinationPath** e **SourcePath** têm ambos de estar acessíveis pelo nó de destino.</span><span class="sxs-lookup"><span data-stu-id="95561-106">The **DestinationPath** and **SourcePath** must both be accessible by the target Node.</span></span>

## <a name="syntax"></a><span data-ttu-id="95561-107">Sintaxe</span><span class="sxs-lookup"><span data-stu-id="95561-107">Syntax</span></span>

```
File [string] #ResourceName
{
    DestinationPath = [string]
    [ Attributes = [string[]] { Archive | Hidden | ReadOnly | System }]
    [ Checksum = [string] { CreatedDate | ModifiedDate | SHA-1 | SHA-256 | SHA-512 } ]
    [ Contents = [string] ]
    [ Credential = [PSCredential] ]
    [ Ensure = [string] { Absent | Present } ]
    [ Force = [bool] ]
    [ Recurse = [bool] ]
    [ DependsOn = [string[]] ]
    [ SourcePath = [string] ]
    [ Type = [string] { Directory | File } ]
    [ MatchSource = [bool] ]
}
```

## <a name="properties"></a><span data-ttu-id="95561-108">Propriedades</span><span class="sxs-lookup"><span data-stu-id="95561-108">Properties</span></span>

|<span data-ttu-id="95561-109">Propriedade</span><span class="sxs-lookup"><span data-stu-id="95561-109">Property</span></span>       |<span data-ttu-id="95561-110">Descrição</span><span class="sxs-lookup"><span data-stu-id="95561-110">Description</span></span>                                                                   |<span data-ttu-id="95561-111">Necessária</span><span class="sxs-lookup"><span data-stu-id="95561-111">Required</span></span>|<span data-ttu-id="95561-112">Predefinido</span><span class="sxs-lookup"><span data-stu-id="95561-112">Default</span></span>|
|---------------|------------------------------------------------------------------------------|--------|-------|
|<span data-ttu-id="95561-113">DestinationPath</span><span class="sxs-lookup"><span data-stu-id="95561-113">DestinationPath</span></span>|<span data-ttu-id="95561-114">A localização, no nó de destino, deseja garantir é `Present` ou `Absent`.</span><span class="sxs-lookup"><span data-stu-id="95561-114">The location, on the target node, you want to ensure is `Present` or `Absent`.</span></span>|<span data-ttu-id="95561-115">Sim</span><span class="sxs-lookup"><span data-stu-id="95561-115">Yes</span></span>|<span data-ttu-id="95561-116">Não</span><span class="sxs-lookup"><span data-stu-id="95561-116">No</span></span>|
|<span data-ttu-id="95561-117">Atributos</span><span class="sxs-lookup"><span data-stu-id="95561-117">Attributes</span></span>     |<span data-ttu-id="95561-118">O estado pretendido dos atributos do ficheiro de destino ou diretório.</span><span class="sxs-lookup"><span data-stu-id="95561-118">The desired state of the attributes for the targeted file or directory.</span></span> <span data-ttu-id="95561-119">Os valores válidos são **arquivo**, **Hidden**, **só de leitura**, e **sistema**.</span><span class="sxs-lookup"><span data-stu-id="95561-119">Valid values are **Archive**, **Hidden**, **ReadOnly**, and **System**.</span></span>|<span data-ttu-id="95561-120">Não</span><span class="sxs-lookup"><span data-stu-id="95561-120">No</span></span>|<span data-ttu-id="95561-121">Nenhum</span><span class="sxs-lookup"><span data-stu-id="95561-121">None</span></span>|
|<span data-ttu-id="95561-122">Checksum</span><span class="sxs-lookup"><span data-stu-id="95561-122">Checksum</span></span>      |<span data-ttu-id="95561-123">O tipo de soma de verificação a utilizar ao determinar se dois arquivos são os mesmos.</span><span class="sxs-lookup"><span data-stu-id="95561-123">The checksum type to use when determining whether two files are the same.</span></span> <span data-ttu-id="95561-124">Valores válidos incluem: SHA-1, SHA-256, SHA-512, colunas createdDate e modifiedDate.</span><span class="sxs-lookup"><span data-stu-id="95561-124">Valid values include: SHA-1, SHA-256, SHA-512, createdDate, modifiedDate.</span></span>|<span data-ttu-id="95561-125">Não</span><span class="sxs-lookup"><span data-stu-id="95561-125">No</span></span>|<span data-ttu-id="95561-126">Apenas o nome de ficheiro ou diretório é comparado.</span><span class="sxs-lookup"><span data-stu-id="95561-126">Only the file or directory name is compared.</span></span>|
|<span data-ttu-id="95561-127">Conteúdos</span><span class="sxs-lookup"><span data-stu-id="95561-127">Contents</span></span>       |<span data-ttu-id="95561-128">Só é válida quando utilizada com `File` tipo.</span><span class="sxs-lookup"><span data-stu-id="95561-128">Only valid when used with `File` type.</span></span> <span data-ttu-id="95561-129">Indica o conteúdo para Certifique-se está `Present` ou `Absent` do ficheiro de destino.</span><span class="sxs-lookup"><span data-stu-id="95561-129">Indicates the contents to Ensure are `Present` or `Absent` from the targeted file.</span></span> |<span data-ttu-id="95561-130">Não</span><span class="sxs-lookup"><span data-stu-id="95561-130">No</span></span>|<span data-ttu-id="95561-131">Nenhum</span><span class="sxs-lookup"><span data-stu-id="95561-131">None</span></span>|
|<span data-ttu-id="95561-132">Credencial</span><span class="sxs-lookup"><span data-stu-id="95561-132">Credential</span></span>     |<span data-ttu-id="95561-133">As credenciais que são necessárias para aceder aos recursos, tais como ficheiros de origem.</span><span class="sxs-lookup"><span data-stu-id="95561-133">The credentials that are required to access resources, such as source files.</span></span>|<span data-ttu-id="95561-134">Não</span><span class="sxs-lookup"><span data-stu-id="95561-134">No</span></span>|<span data-ttu-id="95561-135">Conta de computador do nó de destino.</span><span class="sxs-lookup"><span data-stu-id="95561-135">The target node's Computer Account.</span></span> <span data-ttu-id="95561-136">(*consulte nota*)</span><span class="sxs-lookup"><span data-stu-id="95561-136">(*see note*)</span></span>|
|<span data-ttu-id="95561-137">Certifique-se</span><span class="sxs-lookup"><span data-stu-id="95561-137">Ensure</span></span>         |<span data-ttu-id="95561-138">O estado pretendido do ficheiro de destino ou diretório.</span><span class="sxs-lookup"><span data-stu-id="95561-138">The desired state of the target file or directory.</span></span> |<span data-ttu-id="95561-139">Não</span><span class="sxs-lookup"><span data-stu-id="95561-139">No</span></span>|<span data-ttu-id="95561-140">**Presente**</span><span class="sxs-lookup"><span data-stu-id="95561-140">**Present**</span></span>|
|<span data-ttu-id="95561-141">Force</span><span class="sxs-lookup"><span data-stu-id="95561-141">Force</span></span>          |<span data-ttu-id="95561-142">Substitui as operações de acesso que resultariam num erro (como substituir um ficheiro ou eliminar um diretório que não está vazio).</span><span class="sxs-lookup"><span data-stu-id="95561-142">Overrides access operations that would result in an error (such as overwriting a file or deleting a directory that is not empty).</span></span>|<span data-ttu-id="95561-143">Não</span><span class="sxs-lookup"><span data-stu-id="95561-143">No</span></span>|`$false`|
|<span data-ttu-id="95561-144">Recurse</span><span class="sxs-lookup"><span data-stu-id="95561-144">Recurse</span></span>        |<span data-ttu-id="95561-145">Só é válida quando utilizada com `Directory` tipo.</span><span class="sxs-lookup"><span data-stu-id="95561-145">Only valid when used with `Directory` type.</span></span> <span data-ttu-id="95561-146">Executa o recursivamente de operação de estado para todos os subdiretórios.</span><span class="sxs-lookup"><span data-stu-id="95561-146">Performs the state operation recursively to all subdirectories.</span></span>|<span data-ttu-id="95561-147">Não</span><span class="sxs-lookup"><span data-stu-id="95561-147">No</span></span>|`$false`|
|<span data-ttu-id="95561-148">DependsOn</span><span class="sxs-lookup"><span data-stu-id="95561-148">DependsOn</span></span>      |<span data-ttu-id="95561-149">Define uma dependência de recursos especificados.</span><span class="sxs-lookup"><span data-stu-id="95561-149">Sets a dependency on specified resource(s).</span></span> <span data-ttu-id="95561-150">Este recurso só será executado após a execução bem-sucedida de todos os recursos dependentes.</span><span class="sxs-lookup"><span data-stu-id="95561-150">This resource will only execute after successful execution of any dependent resources.</span></span> <span data-ttu-id="95561-151">Pode especificar recursos dependentes, utilizando a sintaxe `"[ResourceType]ResourceName"`.</span><span class="sxs-lookup"><span data-stu-id="95561-151">You can specify dependent resources using the syntax `"[ResourceType]ResourceName"`.</span></span> <span data-ttu-id="95561-152">Consulte [about_DependsOn](../../../configurations/resource-depends-on.md)</span><span class="sxs-lookup"><span data-stu-id="95561-152">See [about_DependsOn](../../../configurations/resource-depends-on.md)</span></span>|<span data-ttu-id="95561-153">Não</span><span class="sxs-lookup"><span data-stu-id="95561-153">No</span></span>|<span data-ttu-id="95561-154">Nenhum</span><span class="sxs-lookup"><span data-stu-id="95561-154">None</span></span>|
|<span data-ttu-id="95561-155">SourcePath</span><span class="sxs-lookup"><span data-stu-id="95561-155">SourcePath</span></span>     |<span data-ttu-id="95561-156">O caminho a partir da qual pretende copiar o recurso de ficheiro ou pasta.</span><span class="sxs-lookup"><span data-stu-id="95561-156">The path from which to copy the file or folder resource.</span></span>|<span data-ttu-id="95561-157">Não</span><span class="sxs-lookup"><span data-stu-id="95561-157">No</span></span>|<span data-ttu-id="95561-158">Nenhum</span><span class="sxs-lookup"><span data-stu-id="95561-158">None</span></span>|
|<span data-ttu-id="95561-159">Tipo</span><span class="sxs-lookup"><span data-stu-id="95561-159">Type</span></span>           |<span data-ttu-id="95561-160">O tipo de recurso que está a ser configurado.</span><span class="sxs-lookup"><span data-stu-id="95561-160">The type of resource being configured.</span></span> <span data-ttu-id="95561-161">Os valores válidos são `Directory` e `File`.</span><span class="sxs-lookup"><span data-stu-id="95561-161">Valid values are `Directory` and `File`.</span></span>|<span data-ttu-id="95561-162">Não</span><span class="sxs-lookup"><span data-stu-id="95561-162">No</span></span>|`File`|
|<span data-ttu-id="95561-163">MatchSource</span><span class="sxs-lookup"><span data-stu-id="95561-163">MatchSource</span></span>    |<span data-ttu-id="95561-164">Determina se o recurso deve monitorizar para novos ficheiros adicionados para o diretório de origem após a cópia inicial.</span><span class="sxs-lookup"><span data-stu-id="95561-164">Determines if the resource should monitor for new files added to the source directory after the initial copy.</span></span> <span data-ttu-id="95561-165">Um valor de `$true` indica que, após a cópia inicial, quaisquer novos ficheiros de origem devem ser copiados para o destino.</span><span class="sxs-lookup"><span data-stu-id="95561-165">A value of `$true` indicates that, after the initial copy, any new source files should be copied to the destination.</span></span> <span data-ttu-id="95561-166">Se definido como `$False`, o recurso coloca em cache o conteúdo do diretório de origem e ignora todos os ficheiros adicionados após a cópia inicial.</span><span class="sxs-lookup"><span data-stu-id="95561-166">If set to `$False`, the resource caches the contents of the source directory and ignores any files added after the initial copy.</span></span>|<span data-ttu-id="95561-167">Não</span><span class="sxs-lookup"><span data-stu-id="95561-167">No</span></span>|`$false`|

> [!WARNING]
> <span data-ttu-id="95561-168">Se não especificar um valor para `Credential` ou `PSRunAsCredential` (PS V.5), o recurso irá utilizar a conta de computador do nó de destino para aceder a `SourcePath`.</span><span class="sxs-lookup"><span data-stu-id="95561-168">If you do not specify a value for `Credential` or `PSRunAsCredential` (PS V.5), the resource will use the computer account of the target node to access the `SourcePath`.</span></span>  <span data-ttu-id="95561-169">Quando o `SourcePath` é um UNC da partilha, isto pode resultar num erro "Acesso negado".</span><span class="sxs-lookup"><span data-stu-id="95561-169">When the `SourcePath` is a UNC share, this could result in an "Access Denied" error.</span></span> <span data-ttu-id="95561-170">Certifique-se as suas permissões são definidas em conformidade ou utilizam o `Credential` ou `PSRunAsCredential` propriedades para especificar a conta que deve ser utilizada.</span><span class="sxs-lookup"><span data-stu-id="95561-170">Please ensure your permissions are set accordingly, or use the `Credential` or `PSRunAsCredential` properties to specify the account that should be used.</span></span>

## <a name="present-vs-absent"></a><span data-ttu-id="95561-171">Apresentar vs. Ausente</span><span class="sxs-lookup"><span data-stu-id="95561-171">Present vs. Absent</span></span>

<span data-ttu-id="95561-172">Cada recurso de DSC realiza operações diferentes com base no valor especificado para o `Ensure` propriedade.</span><span class="sxs-lookup"><span data-stu-id="95561-172">Each DSC resource performs different operations based on the value you specify for the `Ensure` property.</span></span> <span data-ttu-id="95561-173">Os valores que especifica para as propriedades acima determina a operação de estado executada.</span><span class="sxs-lookup"><span data-stu-id="95561-173">The values you specify for the above properties determines the state operation performed.</span></span>

### <a name="existence"></a><span data-ttu-id="95561-174">Existência</span><span class="sxs-lookup"><span data-stu-id="95561-174">Existence</span></span>

<span data-ttu-id="95561-175">Quando apenas especificar uma `DestinationPath`, o recurso garante que o caminho existe (`Present`) ou não existe (`Absent`).</span><span class="sxs-lookup"><span data-stu-id="95561-175">When you only specify a `DestinationPath`, the resource ensures that the path exists (`Present`) or does not exist (`Absent`).</span></span>

### <a name="copy-operations"></a><span data-ttu-id="95561-176">Operações de cópia</span><span class="sxs-lookup"><span data-stu-id="95561-176">Copy Operations</span></span>

<span data-ttu-id="95561-177">Quando especificar uma `SourcePath` e uma `DestinationPath` com um `Type` o valor de **Directory**, o diretório de origem de cópias de recursos para o caminho de destino.</span><span class="sxs-lookup"><span data-stu-id="95561-177">When you specify a `SourcePath` and a `DestinationPath` with a `Type` value of **Directory**, the resource copies source directory to the destination path.</span></span> <span data-ttu-id="95561-178">As propriedades `Recurse`, `Force`, e `MatchSource` alterar o tipo de operação de cópia efetuada, embora `Credential` determina a conta a utilizar para aceder ao diretório de origem.</span><span class="sxs-lookup"><span data-stu-id="95561-178">The properties `Recurse`, `Force`, and `MatchSource` change the type of copy operation performed, while `Credential` determines which account to use to access the source directory.</span></span>

### <a name="limitations"></a><span data-ttu-id="95561-179">Limitações</span><span class="sxs-lookup"><span data-stu-id="95561-179">Limitations</span></span>

<span data-ttu-id="95561-180">Se tiver especificado um valor de `ReadOnly` para o `Attributes` propriedade em conjunto com um `DestinationPath`, `Ensure = "Present"` criaria o caminho especificado, enquanto `Contents` definiria o conteúdo do ficheiro.</span><span class="sxs-lookup"><span data-stu-id="95561-180">If you specified a value of `ReadOnly` for the `Attributes` property alongside a `DestinationPath`, `Ensure = "Present"` would create the path specified, while `Contents` would set the contents of the file.</span></span>  <span data-ttu-id="95561-181">Uma `Absent` ignorará a operação de estado a `Attributes` propriedade totalmente e remover qualquer ficheiro no caminho especificado.</span><span class="sxs-lookup"><span data-stu-id="95561-181">An `Absent` state operation would ignore the `Attributes` property entirely, and remove any file at the specified path.</span></span>

## <a name="example"></a><span data-ttu-id="95561-182">Exemplo</span><span class="sxs-lookup"><span data-stu-id="95561-182">Example</span></span>

<span data-ttu-id="95561-183">O exemplo seguinte copia um diretório e respetivos subdiretórios de um servidor de solicitação para um nó de destino usando o recurso do ficheiro.</span><span class="sxs-lookup"><span data-stu-id="95561-183">The following example copies a directory and its subdirectories from a pull server to a target node using the File Resource.</span></span> <span data-ttu-id="95561-184">Se a operação for bem-sucedida, o recurso de Log escreve uma mensagem de confirmação para o registo de eventos.</span><span class="sxs-lookup"><span data-stu-id="95561-184">If the operation succeeds, the Log resource writes a confirmation message to the event log.</span></span>

<span data-ttu-id="95561-185">O diretório de origem é um caminho UNC (`\\PullServer\DemoSource`) partilhado do servidor de solicitação.</span><span class="sxs-lookup"><span data-stu-id="95561-185">The source directory is a UNC path (`\\PullServer\DemoSource`) shared from the Pull Server.</span></span> <span data-ttu-id="95561-186">O `Recurse` propriedade garante que todos os subdiretórios são copiados também.</span><span class="sxs-lookup"><span data-stu-id="95561-186">The `Recurse` property ensures that all subdirectories are copied as well.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="95561-187">O LCM no nó de destino é executado no contexto da conta do sistema local por predefinição.</span><span class="sxs-lookup"><span data-stu-id="95561-187">The LCM on the target Node executes in the context of the local system account by default.</span></span> <span data-ttu-id="95561-188">Para conceder acesso para o **SourcePath**, conceder permissões adequadas de conta de computador do nó de destino.</span><span class="sxs-lookup"><span data-stu-id="95561-188">To grant access to the **SourcePath**, give the target Node's computer account appropriate permissions.</span></span> <span data-ttu-id="95561-189">O **credencial** e **PSDSCRunAsCredential** (v5) alterar ambas as utilizações de contexto o LCM para acessar o **SourcePath**.</span><span class="sxs-lookup"><span data-stu-id="95561-189">The **Credential** and **PSDSCRunAsCredential** (v5) both change the context the LCM uses to access the **SourcePath**.</span></span> <span data-ttu-id="95561-190">Ainda tem de conceder acesso à conta que será utilizado para aceder a **SourcePath**.</span><span class="sxs-lookup"><span data-stu-id="95561-190">You still need to grant access to the account that will be used to access the **SourcePath**.</span></span>

```powershell
Configuration FileResourceDemo
{
    Node "localhost"
    {
        File DirectoryCopy
        {
            Ensure = "Present" # Ensure the directory is Present on the target node.
            Type = "Directory" # The default is File.
            Recurse = $true # Recursively copy all subdirectories.
            SourcePath = "\\PullServer\DemoSource"
            DestinationPath = "C:\Users\Public\Documents\DSCDemo\DemoDestination"
        }

        Log AfterDirectoryCopy
        {
            # The message below gets written to the Microsoft-Windows-Desired State Configuration/Analytic log
            Message = "Finished running the file resource with ID DirectoryCopy"
            DependsOn = "[File]DirectoryCopy" # Depends on successful execution of the File resource.
        }
    }
}
```

<span data-ttu-id="95561-191">Para outros, usando on **credenciais** Consulte DSC [executar como usuário](../../../configurations/runAsUser.md) ou [credenciais de dados de configuração](../../../configurations/configDataCredentials.md).</span><span class="sxs-lookup"><span data-stu-id="95561-191">For more on using **Credentials** in DSC see [Run As User](../../../configurations/runAsUser.md) or [Config Data Credentials](../../../configurations/configDataCredentials.md).</span></span>
