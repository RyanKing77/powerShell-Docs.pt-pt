---
ms.date: 12/12/2018
keywords: DSC, powershell, configuração, a configuração
title: Configurar o Gestor de configuração de Local em versões anteriores do Windows PowerShell
ms.openlocfilehash: 31ba2ecdaa5a2ff7fcfddb1791c4d00343f4b5d5
ms.sourcegitcommit: 00ff76d7d9414fe585c04740b739b9cf14d711e1
ms.translationtype: MT
ms.contentlocale: pt-PT
ms.lasthandoff: 12/14/2018
ms.locfileid: "53404986"
---
# <a name="configuring-the-local-configuration-manager-in-previous-versions-of-windows-powershell"></a><span data-ttu-id="32c00-103">Configurar o Gestor de configuração de Local em versões anteriores do Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="32c00-103">Configuring the Local Configuration Manager in Previous Versions of Windows PowerShell</span></span>

><span data-ttu-id="32c00-104">Aplica-se a: Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="32c00-104">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="32c00-105">**Para informações relacionadas ao Windows PowerShell 5.0 ou posterior, consulte [configurar o Gestor de configuração Local](metaConfig.md).**</span><span class="sxs-lookup"><span data-stu-id="32c00-105">**For information related to Windows PowerShell 5.0 and later, see [Configuring the Local Configuration Manager](metaConfig.md).**</span></span>

<span data-ttu-id="32c00-106">Gestor de configuração local é o mecanismo do Windows PowerShell Desired State Configuration (DSC).</span><span class="sxs-lookup"><span data-stu-id="32c00-106">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span>
<span data-ttu-id="32c00-107">Ele é executado em todos os nós de destino e, é responsável por chamar os recursos de configuração que estão incluídos num script de configuração de DSC.</span><span class="sxs-lookup"><span data-stu-id="32c00-107">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span>
<span data-ttu-id="32c00-108">Este tópico lista as propriedades do Gestor de configuração do Local e descreve como modificar as definições do Gestor de configuração Local num nó de destino.</span><span class="sxs-lookup"><span data-stu-id="32c00-108">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="32c00-109">Propriedades do Gestor de configuração local</span><span class="sxs-lookup"><span data-stu-id="32c00-109">Local Configuration Manager properties</span></span>

<span data-ttu-id="32c00-110">A seguinte lista as propriedades do Gestor de configuração Local que pode definir ou obter.</span><span class="sxs-lookup"><span data-stu-id="32c00-110">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="32c00-111">**AllowModuleOverwrite**: Controla se as novas configurações transferidas do serviço de configuração podem substituir os antigos no nó de destino.</span><span class="sxs-lookup"><span data-stu-id="32c00-111">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="32c00-112">Os valores possíveis são True e False.</span><span class="sxs-lookup"><span data-stu-id="32c00-112">Possible values are True and False.</span></span>
- <span data-ttu-id="32c00-113">**CertificateID**: O thumbprint de um certificado utilizado para proteger as credenciais transmitidas numa configuração.</span><span class="sxs-lookup"><span data-stu-id="32c00-113">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="32c00-114">Para obter mais informações, consulte [pretendem proteger as credenciais no Windows PowerShell Desired State Configuration?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span><span class="sxs-lookup"><span data-stu-id="32c00-114">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span></span>
- <span data-ttu-id="32c00-115">**ConfigurationID**: Indica um GUID que é utilizado para obter um arquivo de configuração específica de um serviço de solicitação.</span><span class="sxs-lookup"><span data-stu-id="32c00-115">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="32c00-116">O GUID garante que o ficheiro de configuração correto é acessado.</span><span class="sxs-lookup"><span data-stu-id="32c00-116">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="32c00-117">**ConfigurationMode**: Especifica como o Gestor de configuração de Local, na verdade, aplica-se a configuração para os nós de destino.</span><span class="sxs-lookup"><span data-stu-id="32c00-117">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="32c00-118">Ele pode ter os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="32c00-118">It can take the following values:</span></span>
  - <span data-ttu-id="32c00-119">**ApplyOnly**: Com esta opção, DSC aplica-se a configuração e não faz nada além disso, a menos que seja detetada uma nova configuração, ou por enviar uma nova configuração diretamente para o destino de nó ou se estiver a ligar a um serviço de solicitação e DSC Deteta uma nova configuração quando ele verifica-se com o serviço de solicitação.</span><span class="sxs-lookup"><span data-stu-id="32c00-119">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="32c00-120">Se a configuração do nó de destino drifts, foi efetuada nenhuma ação.</span><span class="sxs-lookup"><span data-stu-id="32c00-120">If the target node’s configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="32c00-121">**ApplyAndMonitor**: Com esta opção (que é o padrão), DSC se aplica a qualquer novas configurações, seja enviado por diretamente para o nó de destino ou detetados num serviço pull.</span><span class="sxs-lookup"><span data-stu-id="32c00-121">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="32c00-122">Por esse motivo, se a configuração do nó de destino drifts do arquivo de configuração, o DSC relatórios discrepância nos registos.</span><span class="sxs-lookup"><span data-stu-id="32c00-122">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="32c00-123">Para obter mais informações sobre o registo DSC, veja [utilizar registos de eventos para diagnosticar erros em Desired State Configuration do](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="32c00-123">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
  - <span data-ttu-id="32c00-124">**ApplyAndAutoCorrect**: Com esta opção, DSC aplica-se quaisquer novas configurações, seja enviado por diretamente para o nó de destino ou detetados num serviço pull.</span><span class="sxs-lookup"><span data-stu-id="32c00-124">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="32c00-125">Por esse motivo, se a configuração do nó de destino drifts do arquivo de configuração, DSC relatórios discrepância nos registos e, em seguida, tenta ajustar a configuração do nó de destino para colocar em conformidade com o ficheiro de configuração.</span><span class="sxs-lookup"><span data-stu-id="32c00-125">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="32c00-126">**ConfigurationModeFrequencyMins**: Representa a frequência (em minutos) em que o aplicativo em segundo plano do DSC tenta implementar a configuração atual no nó de destino.</span><span class="sxs-lookup"><span data-stu-id="32c00-126">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="32c00-127">O valor predefinido é 15.</span><span class="sxs-lookup"><span data-stu-id="32c00-127">The default value is 15.</span></span> <span data-ttu-id="32c00-128">Este valor pode ser definido em conjunto com RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="32c00-128">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="32c00-129">Quando RefreshMode está definida como PULL, o nó de destino contacta o serviço de configuração num intervalo definido por RefreshFrequencyMins e transfere a configuração atual.</span><span class="sxs-lookup"><span data-stu-id="32c00-129">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="32c00-130">Independentemente do valor de RefreshMode no intervalo definido por ConfigurationModeFrequencyMins, o mecanismo de consistência aplica-se a configuração mais recente que foi transferida para o nó de destino.</span><span class="sxs-lookup"><span data-stu-id="32c00-130">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="32c00-131">RefreshFrequencyMins deve ser definido como um número inteiro múltiplo de ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="32c00-131">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="32c00-132">**Credencial**: Indica as credenciais (tal como acontece com Get-Credential) necessárias para aceder a recursos remotos, tais como contactar o serviço de configuração.</span><span class="sxs-lookup"><span data-stu-id="32c00-132">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="32c00-133">**DownloadManagerCustomData**: Representa uma matriz que contém dados personalizados específicos para o Gestor de transferências.</span><span class="sxs-lookup"><span data-stu-id="32c00-133">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="32c00-134">**DownloadManagerName**: Indica o nome da configuração e o Gestor de transferências do módulo.</span><span class="sxs-lookup"><span data-stu-id="32c00-134">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="32c00-135">**RebootNodeIfNeeded**: Determinadas alterações de configuração num nó de destino podem exigir que seja reiniciada para que as alterações sejam aplicadas.</span><span class="sxs-lookup"><span data-stu-id="32c00-135">**RebootNodeIfNeeded**: Certain configuration changes on a target node might require it to be restarted for the changes to be applied.</span></span> <span data-ttu-id="32c00-136">Com o valor **True**, esta propriedade irá reiniciar o nó assim que a configuração tiver sido completamente aplica-se, sem aviso ainda mais.</span><span class="sxs-lookup"><span data-stu-id="32c00-136">With the value **True**, this property will restart the node as soon as the configuration has been completely applies, without further warning.</span></span> <span data-ttu-id="32c00-137">Se **False** (o valor predefinido), a configuração será concluída, mas o nó tem de ser reiniciado manualmente para que as alterações entrem em vigor.</span><span class="sxs-lookup"><span data-stu-id="32c00-137">If **False** (the default value), the configuration will be completed, but the node must be restarted manually for the changes to take effect.</span></span>
- <span data-ttu-id="32c00-138">**RefreshFrequencyMins**: Utilizado quando tiver definido um serviço pull.</span><span class="sxs-lookup"><span data-stu-id="32c00-138">**RefreshFrequencyMins**: Used when you have set up a pull service.</span></span> <span data-ttu-id="32c00-139">Representa a frequência (em minutos) em que o Gestor de configuração Local entra em contacto com um serviço pull para transferir a configuração atual.</span><span class="sxs-lookup"><span data-stu-id="32c00-139">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="32c00-140">Este valor pode ser definido em conjunto com ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="32c00-140">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="32c00-141">Quando RefreshMode está definida como PULL, o nó de destino contacta o serviço de solicitação num intervalo definido por RefreshFrequencyMins e transfere a configuração atual.</span><span class="sxs-lookup"><span data-stu-id="32c00-141">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="32c00-142">No intervalo definido por ConfigurationModeFrequencyMins, o mecanismo de consistência, em seguida, aplica a configuração mais recente que foi transferida para o nó de destino.</span><span class="sxs-lookup"><span data-stu-id="32c00-142">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="32c00-143">Se RefreshFrequencyMins não estiver definido como um número inteiro múltiplo de ConfigurationModeFrequencyMins, o sistema será Arredonda-lo.</span><span class="sxs-lookup"><span data-stu-id="32c00-143">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="32c00-144">O valor predefinido é 30.</span><span class="sxs-lookup"><span data-stu-id="32c00-144">The default value is 30.</span></span>
- <span data-ttu-id="32c00-145">**RefreshMode**: Os valores possíveis são **Push** (predefinição) e **extrair**.</span><span class="sxs-lookup"><span data-stu-id="32c00-145">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="32c00-146">A configuração de "push", tem de colocar um ficheiro de configuração em cada nó de destino, utilizando qualquer computador cliente.</span><span class="sxs-lookup"><span data-stu-id="32c00-146">In the “push” configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="32c00-147">No modo de "pull", tem de configurar um serviço pull para o Gestor de configuração Local contactar e acessar os arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="32c00-147">In the “pull” mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="32c00-148">Exemplo de a atualizar as definições do Gestor de configuração Local</span><span class="sxs-lookup"><span data-stu-id="32c00-148">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="32c00-149">Pode atualizar as definições do Gestor de configuração Local de um nó de destino, incluindo uma **LocalConfigurationManager** bloquear dentro do bloco de nó num script de configuração, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="32c00-149">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node “Server001”
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="32c00-150">Executar o script no exemplo anterior, gera um ficheiro MOF que especifica e armazena as definições pretendidas.</span><span class="sxs-lookup"><span data-stu-id="32c00-150">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span>
<span data-ttu-id="32c00-151">Para aplicar as definições, pode utilizar o **Set-dsclocalconfigurationmanager para** cmdlet, conforme mostrado no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="32c00-151">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> <span data-ttu-id="32c00-152">**Tenha em atenção**: Para o **caminho** parâmetro, tem de especificar o mesmo caminho que especificou para o **OutputPath** parâmetro quando a configuração no exemplo anterior é invocado.</span><span class="sxs-lookup"><span data-stu-id="32c00-152">**Note**: For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="32c00-153">Para ver as definições do Gestor de configuração Local atual, pode utilizar o **Get-dsclocalconfigurationmanager para** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="32c00-153">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span>
<span data-ttu-id="32c00-154">Se invocar este cmdlet sem parâmetros, por padrão ele irá obter as definições do Gestor de configuração Local para o nó no qual executá-lo.</span><span class="sxs-lookup"><span data-stu-id="32c00-154">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span>
<span data-ttu-id="32c00-155">Para especificar outro nó, utilize o **CimSession** parâmetro com este cmdlet.</span><span class="sxs-lookup"><span data-stu-id="32c00-155">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>
